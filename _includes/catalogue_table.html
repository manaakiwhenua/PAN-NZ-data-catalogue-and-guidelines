<!-- _includes/catalogue_table.html -->
<h2>{{ include.title }}</h2>

<div class="scroll-sync-container">
    <div class="scrollbar-top"></div>
    <div class="catalogue-table-container">
        <table class="catalogue">
            <thead>
                <tr>
                    <th>Custodian</th>
                    <th>Dataset name</th>
                    <th>License</th>
                    <th>WebMap</th>
                    <th>Download URL</th>
                    <th>API Type</th>
                    <th>API URL</th>
                    <th>ID</th>
                    <th>Name Field</th>
                    <th>Legislation Act</th>
                    <th>Legislation Section</th>
                    <th>Protection Type</th>
                    <th>Reserve Purpose</th>
                    <th>Comment</th>
                    <th>Stated Restrictions</th>
                    <th>Action Required</th>
                </tr>
            </thead>
            <tbody>
                {% for item in site.data[include.datafile] %}
                <tr>
                    <td>{{ item.Custodian }}</td>
                    <td>{{ item["Dataset name"] }}</td>
                    <td>{{ item.License | markdownify }}</td>
                    <td>
                        <div class="link-cell">
                            {% assign webmap = item.WebMap | strip %}
                            {% if webmap != "" and webmap != "-" %}
                            <a href="{{ webmap }}" target="_blank">Webmap</a>
                            {% else %}
                            -
                            {% endif %}
                        </div>
                    </td>
                    <td>
                        <div class="link-cell">
                            {% assign download = item["Download URL"] | strip %}
                            {% if download != "" and download != "-" %}
                            <a href="{{ download }}" target="_blank">Download</a>
                            {% else %}
                            -
                            {% endif %}
                        </div>
                    </td>
                    <td>{{ item["API Type"] }}</td>
                    <td>
                        <div class="link-cell">
                            {% assign api = item["API URL"] | strip %}
                            {% if api != "" and api != "-" %}
                            <a href="{{ api }}" target="_blank">API</a>
                            {% else %}
                            -
                            {% endif %}
                        </div>
                    </td>
                    <td>{{ item.ID }}</td>
                    <td>{{ item["Name Field"] }}</td>
                    <td>{{ item["Legislation Act"] }}</td>
                    <td>{{ item["Legislation Section"] }}</td>
                    <td>{{ item["Protection Type"] }}</td>
                    <td>{{ item["Reserve Purpose"] }}</td>
                    <td>{{ item.Comment }}</td>
                    <td>{{ item["Stated Restrictions"] }}</td>
                    <td>{{ item["Action Required"] }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>

<script>
    document.addEventListener("DOMContentLoaded", function () {
        const topScroll = document.querySelector(".scrollbar-top");
        const tableScroll = document.querySelector(".catalogue-table-container");

        if (topScroll && tableScroll) {
            topScroll.addEventListener("scroll", () => {
                tableScroll.scrollLeft = tableScroll.scrollLeft;
            });

            tableScroll.addEventListener("scroll", () => {
                topScroll.scrollLeft = tableScroll.scrollLeft;
            });
        }
    });
</script>